(window.webpackJsonp=window.webpackJsonp||[]).push([[467],{754:function(t,s,n){"use strict";n.r(s);var a=n(1),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nginx-使用域名设置虚拟主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-使用域名设置虚拟主机"}},[t._v("#")]),t._v(" Nginx 使用域名设置虚拟主机")]),t._v(" "),s("p",[t._v("在真实的上线环境中，一个网站是需要域名和公网 IP 才可以访问的。这也是比较真实的一节课，我们在实际工作中配置最多的就是设置这种虚拟主机。")]),t._v(" "),s("p",[t._v("如果你还没有域名，我希望你也能注册一个，你可以注册一个以你名字全拼的域名，这类域名资源还是比较丰富的。一年才几十元钱，这不仅仅是为了学习这篇课程，更重要是有一个域名会对你的职业发展有很多好处。比如你自己作的程序想展示给别人看，你自己要建立一个博客，或者是你要进行一个程序测试，这些都需要域名的支持。所以如果你是一名程序员，我强烈建议你能申请一个自己的域名。")]),t._v(" "),s("p",[t._v("我这里就使用自己的博客域名作例子了。")]),t._v(" "),s("p",[t._v("先要对域名进行解析，这样域名才能正确定位到你需要的 IP 上。 我这里新建了两个解析，分别是:")]),t._v(" "),s("ul",[s("li",[t._v("nginx.jspang.com :这个域名映射到默认的 Nginx 首页位置。")]),t._v(" "),s("li",[t._v("nginx2.jspang.com : 这个域名映射到原来的 8001 端口的位置。")])]),t._v(" "),s("h2",{attrs:{id:"配置以域名为划分的虚拟主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置以域名为划分的虚拟主机"}},[t._v("#")]),t._v(" 配置以域名为划分的虚拟主机")]),t._v(" "),s("p",[t._v("我们修改"),s("code",[t._v("etc/nginx/conf.d")]),t._v("目录下的 default.conf 文件，把原来的 80 端口虚拟主机改为以域名划分的虚拟主机。代码如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("    server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jspang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("我们再把同目录下的"),s("code",[t._v("8001.conf")]),t._v("文件进行修改，改成如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("    server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            server_name nginx2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jspang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    root "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html8001"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    index index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("然后我们用平滑重启的方式，进行重启，这时候我们在浏览器中访问这两个网页。")]),t._v(" "),s("p",[t._v("其实域名设置虚拟主机也非常简单，主要操作的是配置文件的 server_name 项，还需要域名解析的配合。小伙伴们一定要进行练习一下。后面的课程可能就没有这么简单了。")])])}),[],!1,null,null,null);s.default=e.exports}}]);