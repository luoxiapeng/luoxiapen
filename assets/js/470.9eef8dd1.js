(window.webpackJsonp=window.webpackJsonp||[]).push([[470],{757:function(t,p,a){"use strict";a.r(p);var s=a(1),n=Object(s.a)({},(function(){var t=this,p=t._self._c;return p("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[p("h1",{attrs:{id:"nginx-的-gzip-压缩配置"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#nginx-的-gzip-压缩配置"}},[t._v("#")]),t._v(" Nginx 的 Gzip 压缩配置")]),t._v(" "),p("p",[t._v("Gzip 是网页的一种网页压缩技术，经过 gzip 压缩后，页面大小可以变为原来的 30%甚至更小。更小的网页会让用户浏览的体验更好，速度更快。gzip 网页压缩的实现需要浏览器和服务器的支持。")]),t._v(" "),p("p",[p("img",{attrs:{src:"http://jspang.com/static/upload/20181028/Kt1ecAV6mSyPKRL1JG9Tot_Q.png",alt:"alt"}})]),t._v(" "),p("p",[t._v("从上图可以清楚的明白，gzip 是需要服务器和浏览器同事支持的。当浏览器支持 gzip 压缩时，会在请求消息中包含 Accept-Encoding:gzip,这样 Nginx 就会向浏览器发送听过 gzip 后的内容，同时在相应信息头中加入 Content-Encoding:gzip，声明这是 gzip 后的内容，告知浏览器要先解压后才能解析输出。")]),t._v(" "),p("h2",{attrs:{id:"gzip-的配置项"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#gzip-的配置项"}},[t._v("#")]),t._v(" gzip 的配置项")]),t._v(" "),p("p",[t._v("Nginx 提供了专门的 gzip 模块，并且模块中的指令非常丰富。")]),t._v(" "),p("ul",[p("li",[t._v("gzip : 该指令用于开启或 关闭 gzip 模块。")]),t._v(" "),p("li",[t._v("gzip_buffers : 设置系统获取几个单位的缓存用于存储 gzip 的压缩结果数据流。")]),t._v(" "),p("li",[t._v("gzip_comp_level : gzip 压缩比，压缩级别是 1-9，1 的压缩级别最低，9 的压缩级别最高。压缩级别越高压缩率越大，压缩时间越长。")]),t._v(" "),p("li",[t._v("gzip_disable : 可以通过该指令对一些特定的 User-Agent 不使用压缩功能。")]),t._v(" "),p("li",[t._v("gzip_min_length:设置允许压缩的页面最小字节数，页面字节数从相应消息头的 Content-length 中进行获取。")]),t._v(" "),p("li",[t._v("gzip_http_version：识别 HTTP 协议版本，其值可以是 1.1.或 1.0.")]),t._v(" "),p("li",[t._v("gzip_proxied : 用于设置启用或禁用从代理服务器上收到相应内容 gzip 压缩。")]),t._v(" "),p("li",[t._v("gzip_vary : 用于在响应消息头中添加 Vary：Accept-Encoding,使代理服务器根据请求头中的 Accept-Encoding 识别是否启用 gzip 压缩。")])]),t._v(" "),p("h2",{attrs:{id:"gzip-最简单的配置"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#gzip-最简单的配置"}},[t._v("#")]),t._v(" gzip 最简单的配置")]),t._v(" "),p("div",{staticClass:"language-js extra-class"},[p("pre",{pre:!0,attrs:{class:"language-js"}},[p("code",[t._v("    http "),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        gzip on"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        gzip_types text"),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain application"),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("javascript text"),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("css"),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),p("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),p("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),p("p",[p("code",[t._v("gzip on")]),t._v("是启用 gizp 模块，下面的一行是用于在客户端访问网页时，对文本、JavaScript 和 CSS 文件进行压缩输出。")]),t._v(" "),p("p",[t._v("配置好后，我们就可以重启 Nginx 服务，让我们的 gizp 生效了。")]),t._v(" "),p("p",[t._v("如果你是 windows 操作系统，你可以按 F12 键打开开发者工具，单机当前的请求，在标签中选择 Headers，查看 HTTP 响应头信息。你可以清楚的看见"),p("code",[t._v("Content-Encoding")]),t._v("为 gzip 类型。")]),t._v(" "),p("p",[p("img",{attrs:{src:"http://jspang.com/static/upload/20181028/bxWU2NIWFrC4gRJp3fW_M_Yu.png",alt:"alt"}})]),t._v(" "),p("p",[t._v("看到这个，说明我们成功开启了 gzip。")])])}),[],!1,null,null,null);p.default=n.exports}}]);